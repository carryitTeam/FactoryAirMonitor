<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.carryit.base.fam.dao.FaultRecordsDao">
    <resultMap type="com.carryit.base.fam.bean.FaultRecords" id="FaultRecords">
        <!-- column:库表的字段名 property:实体类里的属性名 -->
        <id column="id" property="id"/>
        <result column="appEui" property="appEui"/>
        <result column="devEui" property="devEui"/>
        <result column="faultContent" property="faultContent"/>
        <result column="createTime" property="createTime"/>
    </resultMap>
    <select id="queryAllFaultRecords"
            resultMap="FaultRecords">
        select id,appEui,devEui,faultContent,createTime from faultrecords
    </select>

    <select id="queryFaultRecordsByAppEui" parameterType="com.carryit.base.fam.bean.FaultRecords"
            resultMap="FaultRecords">
        select id,appEui,devEui,faultContent,createTime from faultrecords where  appEui
        in (select appEui from deviceconfig where deviceType='device' and
        groupId=#{appEui} )
    </select>

    <insert id="addFaultRecords" parameterType="com.carryit.base.fam.bean.FaultRecords"
            useGeneratedKeys="true" keyProperty="id">
        insert into faultrecords(appEui,devEui,faultContent)
        values(#{appEui},#{devEui},#{faultContent})
    </insert>
</mapper>